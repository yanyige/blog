---
layout: default
title: jQuery源码分析 (第二部分)
---

> 接上次，谈到了jQuery中构造函数中的几个方法

### 2.7.3 .get( [index] )
方法.get( [index] ) 返回当前jQuery 对象中指定位置的元素或包含了全部元素的数组。
如果没有传入参数，则调用.toArray() 返回包含了所有元素的数组；如果指定了参数index，
则返回一个单独的元素；参数index 从0 开始计算，并且支持负数，负数表示从元素集合末
尾开始计算。相关代码如下所示：
```
227 // Get the Nth element in the matched element set OR
228 // Get the whole matched element set as a clean array
229 get: function( num ) {
230 return num == null ?
231
232 // Return a 'clean' array
233 this.toArray() :
234
235 // Return just the object
236 ( num < 0 ? this[ this.length + num ] : this[ num ] );
237 },
```

### 2.7.3 .each( function(index, Element) )、jQuery.each( collection, callback(indexInArray, valueOfElement) )

#### 1. .each( function(index, Element) )
方法.each() 遍历当前jQuery 对象，并在每个元素上执行回调函数。每当回调函数执行时，会
传递当前循环次数作为参数，循环次数从0 开始计数；更重要的是，回调函数是在当前元素为上
下文的语境中触发的，即关键字this 总是指向当前元素；在回调函数中返回false 可以终止遍历。
方法.each() 内部通过简单的调用静态方法jQuery.each() 实现，相关代码如下所示：
```
267 // Execute a callback for every element in the matched set.
268 // (You can seed the arguments with an array of args, but this is
269 // only used internally.)
270 each: function( callback, args ) {
271 return jQuery.each( this, callback, args );
272 },
```

#### 2. jQuery.each( collection, callback(indexInArray, valueOfElement) )
静态方法jQuery.each() 是一个通用的遍历迭代方法，用于无缝地遍历对象和数组。对于
数组和含有length 属性的类数组对象（如函数参数对象arguments），该方法通过下标遍历，
从0 到length-1 ；对于其他对象则通过属性名遍历（for-in）。在遍历过程中，如果回调函数
返回false，则结束遍历。相关代码如下所示：
```
627 // args is for internal usage only
628 each: function( object, callback, args ) {
629 var name, i = 0,
630 length = object.length,
631 isObj = length === undefined || jQuery.isFunction( object );
632
633 if ( args ) {
634     if ( isObj ) {
635         for ( name in object ) {
636             if ( callback.apply( object[ name ], args ) === false ) {
637                 break;
638             }
639         }
640     } else {
641         for ( ; i < length; ) {
642             if ( callback.apply( object[ i++ ], args ) === false ) {
643                 break;
644             }
645         }
646     }
647
648 // A special, fast, case for the most common use of each
649     } else {
650         if ( isObj ) {
651             for ( name in object ) {
652                 if ( callback.call( object[ name ], name, object[ name ])===false){
653                     break;
654                 }
655             }
656         } else {
657             for ( ; i < length; ) {
658                 if ( callback.call( object[ i ], i, object[ i++ ] ) === false ) {
659                     break;
660                 }
661             }
662         }
663     }
664
665     return object;
666 },
```

### 2.7.3
